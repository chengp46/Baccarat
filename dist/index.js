var l=class{constructor(e){this.url=e,this.ws=null,this.heartTimer=null,this.reconnectTimer=null,this.reconnectDelay=3e3}connect(){this.ws||(this.ws=new WebSocket(this.url),this.ws.onopen=()=>{console.log("WS connected"),this.startHeartBeat()},this.ws.onmessage=e=>{console.log("WS message:",e.data)},this.ws.onerror=()=>{console.log("WS error")},this.ws.onclose=()=>{console.log("WS closed"),this.stopHeartBeat(),this.ws=null,this.reconnect()})}send(e){this.ws&&this.ws.readyState===WebSocket.OPEN&&this.ws.send(typeof e=="string"?e:JSON.stringify(e))}startHeartBeat(){this.heartTimer=setInterval(()=>{this.send({cmd:"ping"})},5e3)}stopHeartBeat(){clearInterval(this.heartTimer),this.heartTimer=null}reconnect(){this.reconnectTimer||(this.reconnectTimer=setTimeout(()=>{console.log("WS reconnecting..."),this.reconnectTimer=null,this.connect()},this.reconnectDelay))}close(){this.stopHeartBeat(),this.ws&&this.ws.close(),this.ws=null}};var u=class extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='\n            <div class="func-area">\n                <button data-id="1" class="func-button">\u4FE1\u606F</button>\n                <button data-id="2" class="func-button">\u8BBE\u7F6E</button>\n                <button data-id="3" class="func-button">\u62A5\u8868</button>\n                <button data-id="4" class="func-button">\u9A8C\u8BC1</button>\n            </div>\n        ',this.querySelectorAll(".func-button").forEach(e=>{e.addEventListener("mousedown",()=>{e.classList.add("active"),UIBus.emit("func-click",{id:e.dataset.id})}),e.addEventListener("mouseup",()=>{e.classList.remove("active")}),e.addEventListener("mouseleave",()=>{e.classList.remove("active")}),e.addEventListener("touchstart",t=>{t.preventDefault(),e.classList.add("active")}),e.addEventListener("touchend",t=>{t.preventDefault(),e.classList.remove("active"),e.classList.remove("hover"),UIBus.emit("func-click",{id:e.dataset.id})}),e.addEventListener("touchcancel",t=>{t.preventDefault(),e.classList.remove("active"),e.classList.remove("hover")})})}showInfo(){console.log("qw.............")}};customElements.define("function-area",u);var p=class{constructor(){this.events={}}on(e,t){this.events[e]||(this.events[e]=new Set),this.events[e].add(t)}off(e,t){var s;(s=this.events[e])==null||s.delete(t)}emit(e,t){var s;console.log("[Event]",e,t),(s=this.events[e])==null||s.forEach(n=>n(t))}once(e,t){let s=n=>{t(n),this.off(e,s)};this.on(e,s)}};window.UIBus=new p;var c=class a{constructor(e){var t;this.delay=e.delay||0,this.interval=e.interval||0,this.repeat=(t=e.repeat)!=null?t:-1,this.callback=e.callback,this.elapsed=0,this.running=!0,this.group=e.group||"default",this.id=a._id++}update(e){var t,s;return!this.running||(this.elapsed+=e,this.elapsed<this.delay)?!1:this.interval===0?((t=this.callback)==null||t.call(this),!0):this.elapsed>=this.delay+this.interval&&(this.elapsed-=this.interval,(s=this.callback)==null||s.call(this),this.repeat>0&&(this.repeat--,this.repeat===0))}};c._id=1;var h=class{constructor(){this.tasks=[],this.running=!1,this.timeScale=1,this.lastTime=0,this.pausedGroups=new Set}start(){if(this.running)return;this.running=!0,this.lastTime=performance.now();let e=t=>{if(!this.running)return;let s=(t-this.lastTime)*this.timeScale;this.lastTime=t,this.update(s),requestAnimationFrame(e)};requestAnimationFrame(e)}stop(){this.running=!1}update(e){for(let t=this.tasks.length-1;t>=0;t--){let s=this.tasks[t];if(this.pausedGroups.has(s.group))continue;s.update(e)&&this.tasks.splice(t,1)}}once(e,t,s){return this._addTask({delay:e,interval:0,repeat:0,callback:t,group:s})}interval(e,t,s=-1,n){return this._addTask({delay:0,interval:e,repeat:s,callback:t,group:n})}frame(e,t=-1,s){return this._addTask({delay:0,interval:16,repeat:t,callback:e,group:s})}wait(e){return new Promise(t=>{this.once(e,t)})}_addTask(e){let t=new c(e);return this.tasks.push(t),t.id}remove(e){this.tasks=this.tasks.filter(t=>t.id!==e)}clearGroup(e){this.tasks=this.tasks.filter(t=>t.group!==e)}pauseGroup(e){this.pausedGroups.add(e)}resumeGroup(e){this.pausedGroups.delete(e)}clearAll(){this.tasks.length=0}},d=new h;d.start();var v=class extends HTMLElement{constructor(){super(),this.timer=10,this.timerId=-1}connectedCallback(){this.innerHTML='<div class="deal-area">\n            <div class="hand-left">\n                <div class="hand-titile">\n                    <span data-i18n="player_label" class="player_label">\u95F2 (Player)</span>\n                    <span id="score-player" class="score">0</span>\n                </div>\n                <div class="cards-box" id="cards-player"></div>\n            </div>\n            <div class="vs-divider">VS</div>\n            <div class="hand-right">\n                <div class="hand-titile">\n                    <span data-i18n="banker_label" class="banker_label">\u5E84 (Banker)</span>\n                    <span id="score-banker" class="score">0</span>\n                </div>\n                <div class="cards-box" id="cards-banker">\n                </div>\n            </div>\n            <div class="table">\u5C40ID:1123345</div>\n            <div class="countdown">10</div>\n        </div>',this.scorePlayer=this.querySelector("#score-player"),this.scoreBanker=this.querySelector("#score-banker"),this.cardPlayer=this.querySelector("#cards-player"),this.cardBanker=this.querySelector("#cards-banker"),this.tableId=this.querySelector(".table"),this.countdown=this.querySelector(".countdown")}disconnectedCallback(){}attributeChangedCallback(){}showCountdown(){this.countdown.hidden=!1,this.timer=10,this.countdown.textContent=this.timer,d.remove(this.timerId),this.timerId=d.interval(1e3,()=>{this.timer--,this.countdown.textContent=this.timer,this.timer<=0&&(this.countdown.hidden=!0,d.remove(this.timerId))},10)}hideCountdown(){this.countdown.hidden=!0}};customElements.define("deal-area",v);var b=class extends HTMLElement{constructor(){super()}connectedCallback(){this.innerHTML='<div class="betting-area" style="position: relative;">\n        <div class="bet-grid">\n            <div class="side-bets-row">\n                <button class="bet-btn bet-lucky7" id="bet-lucky7">\n                    <div class="bet-number">\n                        <span id="s-area-1">0</span>/<span id="t-area-1">0</span>\n                    </div>\n                    <div class="side-label" data-i18n="lucky7">\u5E78\u8FD07</div>\n                    <div class="odds">1:6/15</div>\n                </button>\n                <button class="bet-btn bet-super-lucky7" id="bet-super-lucky7">\n                    <div class="bet-number">\n                        <span id="s-area-2">0</span>/<span id="t-area-2">0</span>\n                    </div>\n                    <div class="side-label" data-i18n="super_lucky7">\u8D85\u5E787</div>\n                    <div class="odds">1:30+</div>\n                </button>\n                <button class="bet-btn bet-lucky6" id="bet-lucky6">\n                    <div class="bet-number">\n                        <span id="s-area-3">0</span>/<span id="t-area-3">0</span>\n                    </div>\n                    <div class="side-label" data-i18n="lucky6">\u5E786(2/3)</div>\n                    <div class="odds">1:12/20</div>\n                </button>\n                <button class="bet-btn bet-lucky6-2" id="bet-lucky6-2">\n                    <div class="bet-number">\n                        <span id="s-area-4">0</span>/<span id="t-area-4">0</span>\n                    </div>\n                    <div class="side-label" data-i18n="lucky6_2">\u5E786(2\u5F20)</div>\n                    <div class="odds">1:22</div>\n                </button>\n                <button class="bet-btn bet-lucky6-3" id="bet-lucky6-3">\n                    <div class="bet-number">\n                        <span id="s-area-5">0</span>/<span id="t-area-5">0</span>\n                    </div>\n                    <div class="side-label" data-i18n="lucky6_3">\u5E786(3\u5F20)</div>\n                    <div class="odds">1:50</div>\n                </button>\n            </div>\n            <button class="bet-btn bet-player-pair" id="bet-player-pair">\n                <div>\n                    <span id="s-area-6">0</span>/<span id="t-area-6">0</span>\n                </div>\n                <div data-i18n="player_pair">\u95F2\u5BF9</div>\n                <div class="odds">1:11</div>\n            </button>\n            <button class="bet-btn bet-tie" id="bet-tie">\n                <div class="bet-number">\n                    <span id="s-area-7">0</span>/<span id="t-area-7">0</span>\n                </div>\n                <div data-i18n="tie">\u548C</div>\n                <div class="odds">1:8</div>\n            </button>\n            <button class="bet-btn bet-banker-pair" id="bet-banker-pair">\n                <div class="bet-number">\n                    <span id="s-area-8">0</span>/<span id="t-area-8">0</span>\n                </div>\n                <div data-i18n="banker_pair">\u5E84\u5BF9</div>\n                <div class="odds">1:11</div>\n            </button>\n            <button class="bet-btn bet-player-main" id="bet-player">\n                <div class="bet-number" style="font-size:36px">\n                    <span id="s-area-9" style="font-size:42px">0</span>/<span id="t-area-9" style="font-size:42px">0</span>\n                </div>\n                <div class="main-label" data-i18n="player_main">\u95F2</div>\n                <div class="odds" style="font-size:32px">1:1</div>\n            </button>\n            <button class="bet-btn bet-banker-main" id="bet-banker">\n                <div class="bet-number" style="font-size:36px">\n                    <span id="s-area-10" style="font-size:42px">0</span>/<span id="t-area-10" style="font-size:42px">0</span>\n                </div>\n                <div class="main-label" data-i18n="banker_main">\u5E84</div>\n                <div class="odds" id="banker-odds" style="font-size:32px">0.95:1</div>\n            </button>\n        </div>\n        <div class="controls-bar">\n            <div class="chip-container">\n                <div class="chip-item" data-value="1">\n                    <img class="chip-style" src="assets/chip_1.png">\n                    <span class="chip-text">1</span>\n                </div>\n                <div class="chip-item" data-value="5">\n                    <img class="chip-style" src="assets/chip_2.png">\n                    <span class="chip-text">5</span>\n                </div>\n                <div class="chip-item" data-value="10">\n                    <img class="chip-style" src="assets/chip_3.png">\n                    <span class="chip-text">10</span>\n                </div>\n                <div class="chip-item" data-value="50">\n                    <img class="chip-style" src="assets/chip_4.png">\n                    <span class="chip-text">50</span>\n                </div>\n                <div class="chip-item" data-value="100">\n                    <img class="chip-style" src="assets/chip_5.png">\n                    <span class="chip-text">100</span>\n                </div>\n            </div>\n            <div class="action-group">\n                <button id="btn-clear" class="func-button" data-i18n="btn_clear">\u6E05\u9664</button>\n                <div class="pepole" data-value="100">\n                    <img class="pepole-style" src="assets/pepole.png">\n                    <span class="pepole-text">100</span>\n                </div></div></div></div>';let e={"bet-player":"player","bet-banker":"banker","bet-tie":"tie","bet-player-pair":"playerPair","bet-banker-pair":"bankerPair","bet-lucky6":"lucky6","bet-lucky6-2":"lucky6_2","bet-lucky6-3":"lucky6_3","bet-lucky7":"lucky7","bet-super-lucky7":"superLucky7"};for(let s of Object.entries(e)){let n=s[0],L=s[1],i=document.getElementById(n);i&&(i.addEventListener("mousedown",()=>{i.classList.add("active")}),i.addEventListener("mouseup",()=>{i.classList.remove("active")}),i.addEventListener("mouseleave",()=>{i.classList.remove("active")}),i.addEventListener("touchstart",r=>{r.preventDefault(),i.classList.add("active")}),i.addEventListener("touchend",r=>{r.preventDefault(),i.classList.remove("active")}),i.addEventListener("touchcancel",r=>{r.preventDefault(),i.classList.remove("active")}))}this.chips=this.querySelectorAll(".chip-item");let t=null;this.chips.forEach(s=>{s.addEventListener("click",()=>{this.chips.forEach(n=>n.classList.remove("chip-selected")),s.classList.add("chip-selected"),t=s.dataset.value,console.log("\u5F53\u524D\u7B79\u7801:",t)})})}};customElements.define("bet-area",b);function f(){return/Android|iPhone|iPad|iPod/i.test(navigator.userAgent)}function g(){document.documentElement.style.setProperty("--vh",window.innerHeight*.01+"px")}function o(){let a=document.getElementById("phone-shell"),e=document.getElementById("game-container"),t,s;f()?(t=window.innerWidth,s=window.innerHeight):(t=a.clientWidth,s=a.clientHeight);let n=Math.min(t/1080,s/1920);e.style.transform="translate(-50%, -50%) scale(".concat(n,")"),g()}function y(){let a=document.getElementById("phone-shell"),e=document.getElementById("pc-wrapper");f()&&(a.style.width="100%",a.style.height="100%",a.style.borderRadius="0",a.style.boxShadow="none",e.style.alignItems="stretch")}function k(){let a=0;document.addEventListener("touchstart",function(e){e.touches.length>1&&e.preventDefault()}),document.addEventListener("touchend",function(e){let t=new Date().getTime();t-a<300&&e.preventDefault(),a=t},!1)}function w(){document.addEventListener("touchstart",function(a){a.touches.length>1&&a.preventDefault()},{passive:!1}),document.addEventListener("gesturestart",function(a){a.preventDefault()},{passive:!1}),document.addEventListener("gesturechange",function(a){a.preventDefault()},{passive:!1}),document.addEventListener("gestureend",function(a){a.preventDefault()},{passive:!1})}var m=class{constructor(){this.init()}init(){window.addEventListener("resize",o),window.addEventListener("orientationchange",o),y(),o(),w();let e=0;document.addEventListener("touchend",function(t){let s=new Date().getTime();s-e<=300&&t.preventDefault(),e=s},!1),window.addEventListener("load",k),this.funcArea=document.getElementById("function-area"),this.dealArea=document.getElementById("deal-area"),this.funcArea.showInfo(),this.ws=new l(""),UIBus.on("func-click",t=>{switch(t.id){case"1":this.dealArea.hideCountdown();break;case"2":this.dealArea.showCountdown();break}})}run(){}},E=new m;E.run();
